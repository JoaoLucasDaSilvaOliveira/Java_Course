CREATE TABLE TREINADORES(
	id INTEGER PRIMARY KEY AUTOINCREMENT,
  	nome VARCHAR (100),
  	bonusDef INT NOT NULL,
  	bonusAtq INT NOT NULL,
  	classe VARCHAR (25),
  	CONSTRAINT UNIQUE_NOME_TREINADOR UNIQUE (nome)
);
CREATE TABLE POKEMONS (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nome VARCHAR(100) NOT NULL,
    dano INT NOT NULL,
    defesa INT NOT NULL,
    vida INT NOT NULL,
    codDono INTEGER NOT NULL,
    CONSTRAINT COD_DONO_FOREIGNKEY FOREIGN KEY (codDono) REFERENCES TREINADORES (id)
  		ON DELETE SET NULL
  		ON UPDATE CASCADE
  	CONSTRAINT UNIQUE_NOME_POKEMON UNIQUE (nome)
);
CREATE TABLE GINASIO (
	id INTEGER PRIMARY key,
  	nome TEXT,
  	capacidade INT
);

CREATE TABLE BATALHA (
	id INTEGER PRIMARY KEY,
  	codPokemonVencedor INTEGER NOT NULL,
  	id_ginasio INTEGER NOT NULL,
  	CONSTRAINT COD_POKEMON_VENCEDOR_FOREIGNKEY FOREIGN KEY (codPokemonVencedor) REFERENCES POKEMONS (id)
  		ON DELETE NO ACTION
  		ON UPDATE CASCADE,
  	CONSTRAINT ID_GINASIO_FOREIGNKEY FOREIGN KEY (id_ginasio) REFERENCES GINASIO (id)
);

CREATE TABLE TREINADOR_BATALHA_POKEMON(
  	id INTEGER PRIMARY KEY,
	id_batalha INTEGER,
  	id_pokemon INTEGER,
  	id_treinador INTEGER,
  	CONSTRAINT COD_POKEMON_FOREIGNKEY FOREIGN KEY (id_pokemon) REFERENCES POKEMONS (id)
  		ON DELETE NO ACTION
  		ON UPDATE CASCADE,
  CONSTRAINT COD_TREINADOR_FOREIGNKEY FOREIGN KEY (id_treinador) REFERENCES TREINADORES (id)
  		ON DELETE NO ACTION
  		ON UPDATE CASCADE,
  CONSTRAINT COD_BATALHA_FOREIGNKEY FOREIGN KEY (id_batalha) REFERENCES BATALHA (id)
  		ON DELETE NO ACTION
  		ON UPDATE CASCADE
);
PRAGMA foreign_keys = ON;